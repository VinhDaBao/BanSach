<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/base}"><head>
<meta charset="UTF-8">
<title>Danh sÃ¡ch khuyáº¿n mÃ£i</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<div layout:fragment="content">
	<div th:if="${errorDate != null}" class="alert alert-danger">
		<span th:text="${errorDate}"></span>
	</div>
	<div class="container-fluid pt-3 px-0">
		<div class="card shadow-lg border-0">
			<div
				class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
				<h4 class="mb-0">ğŸ Danh sÃ¡ch khuyáº¿n mÃ£i</h4>
				<a href="/admin/promotion/promotion-create" class="btn btn-success">â• ThÃªm má»›i</a>
			</div>

			<div class="card-body">
				<!-- ğŸ” Thanh tÃ¬m kiáº¿m -->
				<form class="row g-2 mb-3" th:action="@{/admin/promotion/search}"
					method="get">
					<div class="col-md-4">
						<input type="text" name="keyword" class="form-control"
							placeholder="TÃ¬m kiáº¿m theo tÃªn..." th:value="${keyword}">
					</div>
					<div class="col-md-2">
						<button type="submit" class="btn btn-outline-primary w-100">ğŸ”
							TÃ¬m kiáº¿m</button>
					</div>
				</form>

				<!-- ğŸ“‹ Báº£ng danh sÃ¡ch -->
				<table class="table table-striped align-middle text-center">
					<thead class="table-dark">
						<tr>
							<th>MÃ£ KM</th>
							<th>TÃªn khuyáº¿n mÃ£i</th>
							<th>NgÃ y báº¯t Ä‘áº§u</th>
							<th>NgÃ y káº¿t thÃºc</th>
							<th>GiÃ¡ trá»‹</th>
							<th>HÃ nh Ä‘á»™ng</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="promo : ${promotions}">
							<td th:text="${promo.maKM}"></td>
							<td th:text="${promo.tenKM}"></td>
							<td th:text="${#temporals.format(promo.ngayBD, 'dd/MM/yyyy')}"></td>
							<td th:text="${#temporals.format(promo.ngayKT, 'dd/MM/yyyy')}"></td>
							<td th:text="${promo.giaTri}"></td>
							<td class="d-flex justify-content-center gap-2">
								<!-- ğŸŸ¦ Chi tiáº¿t -->
								<a th:href="@{'/admin/promotion/' + ${promo.maKM}}" class="btn btn-info btn-sm text-white">ğŸ“˜ Chi tiáº¿t</a>
								<!-- âœ Sá»­a -->
								<a th:href="@{'/admin/promotion/edit/' + ${promo.maKM}}" class="btn btn-warning btn-sm">âœ Sá»­a</a>
								<!-- ğŸ—‘ XÃ³a -->
								<a th:href="@{'/admin/promotion/delete/' + ${promo.maKM}}" class="btn btn-danger btn-sm"
									onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n XÃ“A khuyáº¿n mÃ£i nÃ y khÃ´ng?');">ğŸ—‘ XÃ³a</a>
							</td>
						</tr>
					</tbody>
				</table>

				<!-- ğŸ“Œ PhÃ¢n trang -->
				<nav>
					<ul class="pagination justify-content-center">
						<li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
							<a class="page-link" th:href="@{/promotions(page=${currentPage - 1}, keyword=${keyword})}">Â«</a>
						</li>
						<li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}" th:classappend="${i == currentPage} ? 'active'">
							<a class="page-link" th:href="@{/promotions(page=${i}, keyword=${keyword})}" th:text="${i}"></a>
						</li>
						<li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
							<a class="page-link" th:href="@{/promotions(page=${currentPage + 1}, keyword=${keyword})}">Â»</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	</div>
</html>